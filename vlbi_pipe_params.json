{
    "global":{
        "project_code"      :  "bd228a",
        "cwd"               :  "/Users/jackradcliffe/Documents/VLBA_COSMOS",
        "vlbipipe_path"     :  "VLBI_pipeline",
        "job_manager"       :  "bash",
        "HPC_project_code"  :  "ASTR1313",
        "default_partition" :  "normal",
        "default_walltime"  :  "10:00:00",
        "default_nodes"     :     2,
        "default_cpus"      :    24,
        "default_mpiprocs"  :    24,
        "default_nodetype"  :  "haswell_reg",
        "email_progress"    :  "jack.f.radcliffe@gmail.com",
        "mpicasapath"       :  "mpirun -q -n 4",
        "casapath"          :  "python",
        "singularity"       :  false,
        "AOflag_command"    : ["/Users/jackradcliffe/Documents/anaconda3/envs/aoflag/bin/aoflagger"],
        "wsclean_command"   : ["/Volumes/HD-LXU3/anaconda2/anaconda2/bin/wsclean"],
        "fitsidi_files"     : ["auto"],
        "fitsidi_path"      :  "raw_UV",
        "refant"            : ["OV","KP","HN","BR","MK","LA","NL","SC","FD"],
        "fringe_finders"    : ["4C39.25"],
        "phase_calibrators" : ["J1011+0106"],
        "targets"           : ["COSMOS-POINT"],
        "do_parang"         :  true
    },
    "prepare_data":{
        "antab_file"        :  "auto",
        "flag_file"         :  "auto",
        "gaincurve":{
            "min_elevation" :   0.0,
            "max_elevation" :  90.0
        },
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "import_fitsidi":{
        "const_obs_id"      :  true,
        "scan_gap"          :  15.0,
        "remove_idi"        :  true,
        "make_backup"       :  true,
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "make_mms":{
        "separationaxis"    :  "auto",
        "numsubms"          :  "auto",
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "apriori_cal":{
        "correlator"        :  "default",
        "cal_weights"       :  true,
        "accor_options":{
            "solint"        :  "inf",
            "smooth"        :  true,
            "smoothtime"    : 180.0,
            "interp"        : "linear"
        },
        "do_observatory_flg": true,
        "make_gaincurve"    : true,
        "tsys_options":{
            "interp_flags"  :  true,
            "smooth"        :  true,
            "outlier_SN"    : [2.5,2.0],
            "jump_ident_pc" :  20,
            "interp"        : "linear,linear"
        },
        "ionex_options":{
        	"run"           :  true,
            "ionex_type"    : "final"
        },
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :   -1,
            "cpus"          :   -1,
            "mpiprocs"      :   -1,
            "nodetype"      :  "default"
        }
    },
    "init_flag":{
        "AO_flag_strategy"  :  "VLBI_pipeline/aoflag_strategies/faint_sources.rfis",
        "AO_flag_fields"    : ["COSMOS-POINT"],
        "flag_edge_chans":{
            "run"           :  true,
            "edge_chan_flag":  "5%"
        },
        "flag_autocorrs"    :  false,
        "quack_data":{
            "run"           :  true,
            "quack_time"    :  {"*":10.0},
            "quack_mode"    :  "beg"
        },
        "manual_flagging":{
            "run"           :  false,
            "flag_file"     :  ""
        },
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :   -1,
            "cpus"          :   -1,
            "mpiprocs"      :   -1,
            "nodetype"      :  "default"
        }
    },
    "fit_autocorrs":{
        "select_calibrators": ["4C39.25","J1011+0106"],
        "interp_bad_solutions": true, 
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :   -1,
            "cpus"          :   -1,
            "mpiprocs"      :   -1,
            "nodetype"      :  "default"
        }
    },
    "sub_band_delay":{
        "select_calibrators": [["default"],["J1011+0106"]], 
        "time_range"        : ["","2020/10/30/17:10:23.0~17:11:11.0"],
        "sol_interval"      : ["60s","inf"],
        "min_snr"           : [5.0,5.0],
        "fringe_niter"      :  300,
        "do_disp_delays"    :  true,
        "extensive_search"  :  false,
        "modify_sbd":{
            "run"           :  true,
            "spw_passmark"  :  0.5,
            "clip_badtimes" :  0.66
        },       
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :   -1,
            "cpus"          :   -1,
            "mpiprocs"      :   -1,
            "nodetype"      :  "default"
        }
    },
    "bandpass_cal":{
        "same_as_sbd_cal"   :  false,
        "select_calibrators": [["4C39.25"]], 
        "time_range"        : [""],
        "sol_interval"      :  "inf",
        "min_snr"           :  3.0,
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :  -1,
            "cpus"          :  -1,
            "mpiprocs"      :  -1,
            "nodetype"      :  "default"
        }
    },
    "phase_referencing":{        
        "select_calibrators":  [["J1011+0106"]],
        "cal_type"          : [[  "f",  "f",  "f",  "p",   "p", "ap", "ap", "ap",  "ap",   "p"]],   
        "sol_interval"      : [["inf","inf","inf","inf","1min","inf","inf","inf","1min","1min"]],
        "combine"           : [["spw","spw",   "",   "",    "","spw",   "",   "", "spw",    ""]],
        "interp_flagged"    : [[ true, true, true, true,  true, true, true, true,  true,  true]],
        "pass_ants"         : [[]],
        "do_disp_delays"    : true,
        "cal_weights"       : true,
        "imager"            :  "tclean",
        "fringe_niter"      :  300,
        "min_snr"           :  5.0,
        "imaging_params"    :  "auto",
        "masking"           :  "peak",
        "thresholding"      :  "offset",
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "apply_target":{
        "statistical_reweigh":{
                "run": false,
                "timebin"   :  "10s",
                "chanbin"   :  "spw",
                "statalg"   :  "classic",
                "fitspw"    :  ""
        },
        "weigh_by_ants":{
                "run": true
        },
        "backup_caltables"  : true,
        "image_target"      : true,
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "prepare_apply_all":{
        "target_path"       : "./target_files",
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default"
        }
    },
    "apply_to_all":{  
        "target_outpath"    : "/Users/jackradcliffe/Astro/VLBA_COSMOS/BD228A/JFR_calibrated",
        "tar_output"        : true,      
        "pbcor":{
            "run"           : true,
            "implementation": "uvcorr",
            "vex_file"      : "",
            "pointing_centre"  : ["10h01m22.8651s","02d19m28.333s"],
            "backup_caltables"  : true
        },
        "image_target":{
            "run"           : true,
            "imsize"        : [1024,1024]
        },
        "hpc_options":{
            "partition"     :  "default",
            "walltime"      :  "default",
            "nodes"         :    -1,
            "cpus"          :    -1,
            "mpiprocs"      :    -1,
            "nodetype"      :  "default",
            "max_jobs"      : 24
        }
    }
}
